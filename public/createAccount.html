<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css" />
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet"/>
 <link rel="shortcut icon" type="image/png" href="Website Assets\Logo.png" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birdpals</title>
</head>
<body>
<center>
<h1>Birdpals</h1>

<p>Create Account!</p>
<img src="Website Assets\menu_image.png" alt="Menu Image" width="500" height="375">
<form id="e-mail" onSubmit="logIn(); return false">
        <input id="input-e" type="text" maxlength="50" autocomplete="off" placeholder="E-mail"/>
</form> 
<form id="username" onSubmit="logIn(); return false">
        <input id="input-u" type="text" maxlength="50" autocomplete="off" placeholder="Username"/>
</form> 
<form id="password" onSubmit="logIn(); return false">
        <input id="input-p" type="password" maxlength="50" autocomplete="off" placeholder="Password"/>
</form> 
<form id="confirmpassword" onSubmit="logIn(); return false"> 
        <input id="input-cp" type="password" maxlength="50" autocomplete="off" placeholder="Confirm Password"/> 
</form>
<br>
<div class= "infocard">
	<label class="infotext">By creating an account you agree with our <a href="./Terms and Conditions.html">Terms & Conditions</a></label>
</div>
<br>
<button onclick="logIn()" class="button">Create Account</button>
</center>
<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript" src="https://download.playfab.com/PlayFabClientApi.js"></script>
<script>
function logIn() {
var eMail = document.getElementById('input-e');
var username = document.getElementById('input-u');
var password = document.getElementById('input-p'); // Feel free to add a function that the password input.value appear as ***** to the player
var confirmedpassword = document.getElementById('input-cp'); //Gets the confirmed password

var socket = io();
if(username.value != "" && password.value!="" && eMail.value != ""){
        if(password.value == confirmedpassword.value){
                console.log(username.value);
                
                socket.emit('createAccount', {eMail: eMail.value,username: username.value, password: password.value});
        }
        else{
                alert("It appears the Password fields do not match."); //When the "Confirm Password" and "Password" fields do not contain the same text, display an error.
        }
}
else{
        alert("Please fill out the Email, Username and Password fields.") //When there isn't any text in the username & password fields, display error.
}
socket.on('accountCreated!', () =>{
	alert('Your account was created! Please check your email to verify your account.');
})
socket.on('dirtyWord', () =>{
	alert('Invalid Username. Please change it.')
})
socket.on('error', (error) =>{
	if(error.errorDetails != undefined){
		if(error.errorDetails.Email != undefined){
			alert(error.errorDetails.Email);
		}
		if(error.errorDetails.Username != undefined){
			alert(error.errorDetails.Username);
		}
		if(error.errorDetails.Password != undefined){
			alert(error.errorDetails.Password);
		}
	
	}
})
}

</script>

</body>
</html>